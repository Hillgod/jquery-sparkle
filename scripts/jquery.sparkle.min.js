/*
 GNU Affero General Public License - {@link http://www.gnu.org/licenses/agpl.html}
 @example Visit {@link http://www.balupton.com/projects/jquery-sparkle} for more information.
 GNU General Public License - {@link http://wordpress.org/about/gpl/}
*/
(function(c){if(typeof console==="undefined")console=typeof window.console!=="undefined"?window.console:{};console.log=console.log||function(){};console.debug=console.debug||console.log;console.warn=console.warn||console.log;console.error=console.error||function(){for(var a=[],b=0;b<arguments.length;b++)a.push(arguments[b]);alert(a.join("\n"))};console.trace=console.trace||console.log;console.group=console.group||console.log;console.groupEnd=console.groupEnd||console.log;console.profile=console.profile||
console.log;console.profileEnd=console.profileEnd||console.log;c(document.body).addClass("js");String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.strip=String.prototype.strip||function(a){a=String(a);a=this.replace(eval("/^"+a+"+|"+a+"+$/g"),"");return String(a)};String.prototype.stripLeft=String.prototype.stripLeft||function(a){a=String(a);a=this.replace(eval("/^"+a+"+/g"),"");return String(a)};String.prototype.stripRight=String.prototype.stripRight||
function(a){a=String(a);a=this.replace(eval("/"+a+"+$/g"),"");return String(a)};String.prototype.toInt=String.prototype.toInt||function(){return parseInt(this,10)};String.prototype.wrap=String.prototype.wrap||function(a,b){return a+this+b};String.prototype.wrapSelection=String.prototype.wrapSelection||function(a,b,d,e){if(typeof d==="undefined"||d===null)d=this.length;if(typeof e==="undefined"||e===null)e=this.length;return this.substring(0,d)+a+this.substring(d,e)+b+this.substring(e)};String.prototype.toSlug=
String.prototype.toSlug||function(){return this.toLowerCase().replace(/[\s_]/g,"-").replace(/[^-a-z0-9]/g,"").replace(/--+/g,"-")};String.prototype.passwordStrength=String.prototype.passwordStrength||function(a,b){var d=this.toString(),e=0;a=a||"";b=b||"";if(d.length<4)return"short";if(b.length&&d.toLowerCase()==b.toLowerCase())return"username";if(a.length&&d!=a)return"mismatch";if(d.match(/[0-9]/))e+=10;if(d.match(/[a-z]/))e+=26;if(d.match(/[A-Z]/))e+=26;if(d.match(/[^a-zA-Z0-9]/))e+=31;d=Math.log(Math.pow(e,
d.length))/Math.LN2;if(d<40)return"low";else if(d<56)return"medium";return"high"};Array.prototype.remove=function(a,b){var d=this.slice((b||a)+1||this.length);this.length=a<0?this.length+a:a;return this.push.apply(this,d)};Array.prototype.get=function(a,b){if(a==="first")a=0;else if(a==="last")a=this.length-1;else if(!a&&a!==0)a=this.index;b!==false&&this.setIndex(a);return this[a]||undefined};Array.prototype.each=function(a){for(var b=0;b<this.length;++b)if(a(b,this[b],this)===false)break;return this};
Array.prototype.setIndex=function(a){this.index=a<this.length&&a>=0?a:null;return this};Array.prototype.current=function(a){return this.get(a,true)};Array.prototype.isEmpty=function(){return this.length===0};Array.prototype.isSingle=function(){return this.length===1};Array.prototype.isMany=function(){return this.length!==0};Array.prototype.isLast=function(a){a=typeof a==="undefined"?this.index:a;return!this.isEmpty()&&a===this.length-1};Array.prototype.isFirst=function(a){a=typeof a==="undefined"?
this.index:a;return!this.isEmpty()&&a===0};Array.prototype.clear=function(){this.length=0};Array.prototype.next=function(a){return this.get(this.index+1,a)};Array.prototype.prev=function(a){return this.get(this.index-1,a)};Array.prototype.reset=function(){this.index=null;return this};Array.prototype.set=function(a,b){if(a<this.length&&a>=0)this[a]=b;else{$error("index above array length");return false}return this};Array.prototype.loop=function(){if(!this.index&&this.index!==0)return this.current(0);
return this.next()};Array.prototype.add=function(){this.push.apply(this,arguments);return this};Array.prototype.insert=function(a,b){if(typeof a!=="number")a=this.length;a=a<=this.length?a:this.length;var d=this.slice(a);this.length=a;this.push(b);this.push.apply(this,d);return this};Number.prototype.zeroise=String.prototype.zeroise=String.prototype.zeroise||function(a){var b=this.toString();if(this<0)b=b.substr(1,b.length);for(;b.length<a;)b="0"+b;if(this<0)b="-"+b;return b};Number.prototype.padLeft=
String.prototype.padLeft=String.prototype.padLeft||function(a,b){var d=String(this),e=RegExp(".{"+b+"}$"),f="";if(!a&&a!==0)a=" ";do f+=a;while(f.length<b);return e.exec(f+d)[0]};Number.prototype.padRight=String.prototype.padRight=String.prototype.padRight||function(a,b){var d=String(this),e=RegExp("^.{"+b+"}"),f="";if(!a&&a!==0)a=" ";do f+=a;while(f.length<b);return e.exec(d+f)[0]};Number.prototype.roundTo=String.prototype.roundTo=String.prototype.roundTo||function(){var a=String(parseInt(this,10));
return a=parseInt(a.replace(/[1,2]$/,0).replace(/[3,4]$/,5),10)};Date.prototype.setDatetimestr=Date.prototype.setDatetimestr||function(a){a=a.split(/[\-\s\:]/g);var b=a[3]||0,d=a[4]||0,e=a[5]||0;this.setUTCFullYear(a[0],a[1]-1,a[2]);this.setUTCHours(b);this.setUTCMinutes(d);this.setUTCSeconds(e);return this};Date.prototype.setDatestr=Date.prototype.setDatestr||function(a){a=a.split(/[\-\s\:]/g);this.setUTCFullYear(a[0]||1978,(a[1]||0)-1,a[2]||1);return this};Date.prototype.setTimestr=Date.prototype.setTimestr||
function(a){a=a.split(/[\-\s\:]/g);var b=a[1]||0,d=a[2]||0;this.setUTCHours(a[0]||0);this.setUTCMinutes(b);this.setUTCSeconds(d);return this};Date.prototype.getDatetimestr=Date.prototype.getDatetimestr||function(){return this.getDatestr()+" "+this.getTimestr()};Date.prototype.getDatestr=Date.prototype.getDatestr||function(){var a=this,b=a.getUTCFullYear(),d=(this.getUTCMonth()+1).padLeft(0,2);a=this.getUTCDate().padLeft(0,2);return b+"-"+d+"-"+a};Date.prototype.getTimestr=Date.prototype.getTimestr||
function(){var a=this.getUTCHours().padLeft(0,2),b=this.getUTCMinutes().padLeft(0,2),d=this.getUTCSeconds().padLeft(0,2);return a+":"+b+":"+d};Date.prototype.getDatetime=String.prototype.getDatetime||function(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1).zeroise(2)+"-"+this.getUTCDate().zeroise(2)+"T"+this.getUTCHours().zeroise(2)+":"+this.getUTCMinutes().zeroise(2)+":"+this.getUTCSeconds().zeroise(2)+"+00:00"};Array.prototype.has=Array.prototype.has||function(a){for(var b=false,d=0,e=
this.length;d<e;++d)if(a==this[d]){b=true;break}return b};c.appendStylesheet=c.appendStylesheet||function(a){var b=document.getElementsByTagName(c.browser.safari?"head":"body")[0],d=document.createElement("link");d.type="text/css";d.rel="stylesheet";d.media="screen";d.href=a;d.id="stylesheet-"+a.replace(/[^a-zA-Z0-9]/g,"");c("#"+d.id).remove();b.appendChild(d);return c};c.appendScript=c.appendScript||function(a){var b=document.getElementsByTagName(c.browser.safari?"head":"body")[0],d=document.createElement("script");
d.type="text/javascript";d.src=a;d.id="stylesheet-"+a.replace(/[^a-zA-Z0-9]/g,"");c("#"+d.id).remove();b.appendChild(d);return c};c.fn.parentsAndSelf=c.fn.parentsAndSelf||function(a){return c(this).parents(a).andSelf().filter(a)};c.fn.findAndSelf=c.fn.findAndSelf||function(a){return c(this).find(a).andSelf().filter(a)};c.fn.firstInput=c.fn.firstInput||function(){return c(this).findAndSelf(":input").filter(":first")};c.fn.choose=c.fn.choose||function(a){var b=c(this);if(typeof a==="undefined")a=b.val();
else if(b.val()!==a)return this;switch(true){case this.is("option"):b.parents("select:first").choose(a);break;case b.is(":checkbox"):b.attr("checked",true);break;case b.is(":radio"):b.attr("checked",true);break;case b.is("select"):b.val(a);break;default:break}return this};c.fn.unchoose=c.fn.unchoose||function(){var a=c(this);switch(true){case a.is("option"):a.parents(":select:first").unchoose();break;case a.is(":checkbox"):a.attr("checked",false);break;case a.is(":radio"):a.attr("checked",false);
break;case a.is("select"):a.val(a.find("option:first").val());break;default:break}return this};c.fn.wouldSubmit=c.fn.wouldSubmit||function(){var a=c(this).findAndSelf(":input"),b=true;if(!a.length||!(a.attr("name")||0)||a.is(":radio,:checkbox")&&!a.is(":selected,:checked"))b=false;return b};c.fn.values=c.fn.values||function(){var a={};c(this).findAndSelf(":input").each(function(){var b=c(this),d=b.attr("name")||null,e=b.val();if(!b.wouldSubmit())return true;if(d.indexOf("[]")!==-1){if(typeof a[d]===
"undefined")a[d]=[];a[d].push(e)}else a[d]=e});return a};c.fn.submitForm=c.fn.submitForm||function(){var a=c(this);a.parentsAndSelf("form:first").trigger("submit");return a};c.fn.inDOM=function(){var a=c(this).parent().parent();return a.size()&&(a.height()||a.width())};c.fn.valWrap=function(a,b){var d=c(this);return d.val(d.val().wrap(a,b))};c.fn.valWrapSelection=function(a,b,d,e){var f=c(this),g=f.get(0);a=a||"";b=b||"";if(d||e)f.val(f.val().wrapSelection(a,b,d,e));else{d=g.selectionStart;e=g.selectionEnd;
if(document.selection){g.focus();d=document.selection.createRange();d.text=a+d.text+b}else{var h=g.scrollTop;f.val(f.val().wrapSelection(a,b,d,e));g.focus();g.selectionStart=d+a.length;g.selectionEnd=e+a.length;g.scrollTop=h}}return f};c.fn.giveFocus=function(){c(this).findAndSelf(":input:visible:first").focus();return this};c.fn.highlight=function(){return c(this).effect("highlight",{},3E3)};c.fn.binder=c.fn.binder||function(a,b,d){var e=c(this);if(d)e.bind(a,b,d);else{d=b;e.bind(a,d)}return e};
c.fn.once=c.fn.once||function(a,b,d){var e=c(this);if(d){e.unbind(a,d);e.bind(a,b,d)}else{d=b;e.unbind(a,d);e.bind(a,d)}return e};c.fn.enter=c.fn.enter||function(a,b){return c(this).binder("enter",a,b)};c.event.special.enter=c.event.special.cancel||{setup:function(){c(this).bind("keypress",c.event.special.enter.handler)},teardown:function(){c(this).unbind("keypress",c.event.special.enter.handler)},handler:function(a){c(this);if(a.keyCode===13){a.type="cancel";c.event.handle.apply(this,arguments);
return true}}};c.fn.cancel=c.fn.cancel||function(a,b){return c(this).binder("cancel",a,b)};c.event.special.cancel=c.event.special.cancel||{setup:function(){c(this).bind("keypress",c.event.special.cancel.handler)},teardown:function(){c(this).unbind("keypress",c.event.special.cancel.handler)},handler:function(a){c(this);if(a.keyCode===27){a.type="cancel";c.event.handle.apply(this,arguments);return true}}};c.fn.singleclick=c.fn.singleclick||function(a,b){return c(this).binder("singleclick",a,b)};c.event.special.singleclick=
c.event.special.singleclick||{setup:function(){c(this).bind("click",c.event.special.singleclick.handler)},teardown:function(){c(this).unbind("click",c.event.special.singleclick.handler)},handler:function(a){var b=c(this);b.data("clicking",b.data("clicking")||"no");if(b.data("clicking")!=="yes"){b.data("clicking","yes");setTimeout(function(){b.data("clicking","no")},500);a.type="singleclick";c.event.handle.apply(this,arguments);return true}}};c.fn.passwordStrength=c.fn.passwordStrength||function(a){var b=
c.fn.passwordStrength;b.config=b.config||{content:'<div class="sparkle-passwordstrength-result"></div><div class="sparkle-passwordstrength-description"></div>',contentSelectors:{result:".sparkle-passwordstrength-result",description:".sparkle-passwordstrength-description"},strengthCss:{"short":"invalid",mismatch:"invalid",username:"invalid",low:"low",medium:"medium",high:"high",empty:""},il8n:{description:'Hint: The password should be have a strength of at least medium. To make it stronger, use upper and lower case letters, numbers and symbols like ! " ? $ % ^ &amp; ).',
empty:"Strength indicator",username:"Password should not match username",mismatch:"Confirm password does not match","short":"Password is too short",low:"Weak",medium:"Medium",high:"Strongest"}};var d=c.extend({},b.config);c.extend(true,d,a);a=c(this);var e=a.html(d.content).hide(),f=e.find(d.contentSelectors.result);b=e.find(d.contentSelectors.description).html(d.il8n.description);d.il8n.description||b.remove();var g=[d.strengthCss["short"],d.strengthCss.mismatch,d.strengthCss.username,d.strengthCss.low,
d.strengthCss.medium,d.strengthCss.high,d.strengthCss.empty].join(" "),h=c(d.password),i=c(d.confirm||null),l=c(d.username||null);b=function(){var k=h.val(),j=i.val(),n=l.val();j=k?k.passwordStrength(j,n):"empty";k=d.strengthCss[j];j=d.il8n[j];f.removeClass(g).addClass(k).html(j)};h.keyup(function(){var k=c(this);i.val("");k.val()!==""&&!e.data("shown")&&e.animate({height:"show",opacity:"show"},"slow").data("shown",true)});h.add(i).add(l).keyup(b);b();return a};c.fn.timepicker=c.fn.timepicker||function(){return c(this).each(function(){var a=
c(this);a.hide();if(a.hasClass("sparkle-time-has"))return a;a.addClass("sparkle-time").addClass("sparkle-time-has");for(var b=c('<select class="sparkle-time-hours" />'),d=12,e=1;e<=d;++e)b.append('<option value="'+e+'">'+e.padLeft("0",2)+"</option>");var f=c('<select class="sparkle-time-minutes" />');for(d=0;d<=55;d+=5)f.append('<option value="'+d+'">'+d.padLeft("0",2)+"</option>");var g=c('<select class="sparkle-time-meridian" />');g.append("<option>am</option>");g.append("<option>pm</option>");
e=a.val();var h=new Date;d="12";var i="0",l="am";if(e){h.setTimestr(e);d=h.getUTCHours();i=h.getUTCMinutes();if(d>12){d-=12;l="pm"}}g.insertAfter(a);f.insertAfter(a);b.insertAfter(a);if(d>12&&l=="pm")d-=12;b.val(d);f.val(i.roundTo(5));g.val(l);d=function(){var k=parseInt(b.val(),10),j=f.val();if(g.val()=="pm")k+=12;if(k>=24)k=0;k=k.padLeft(0,2)+":"+j.padLeft(0,2)+":00";a.val(k).trigger("change")};b.add(f).add(g).change(d);a.parent("form:first").submit(d);return a})};c.fn.datetimepicker=c.fn.datetimepicker||
function(){return c(this).each(function(){var a=c(this);a.hide();if(a.hasClass("sparkle-datetime-has"))return a;a.addClass("sparkle-datetime").addClass("sparkle-datetime-has");var b=c('<input type="text" class="sparkle-date"/>'),d=c('<span class="sparkle-datetime-sep"> @ </span>'),e=c('<input type="text" class="sparkle-time"/>'),f=a.val(),g=new Date,h="",i="";if(f){g.setDatetimestr(f);h=g.getDatestr();i=g.getTimestr()}e.insertAfter(a);d.insertAfter(a);b.insertAfter(a);b.val(h);e.val(i);b.add(e).change(function(){var l=
b.val()+" "+e.val();a.val(l).trigger("change")});b.add(e).sparkle();return a})};c.fn.ajaxCalendar=function(a){var b=c(this);if(b.length>1){b.each(function(){c(this).ajaxCalendar(a)});return this}a=a||{};a.ajaxList=a.ajaxList||"entries";a.ajaxUrl=a.ajaxUrl||"/ajax-calendar";a.ajaxData=a.ajaxData||{};a.dayEntryClass=a.dayEntryClass||"has-entry";a.domEvents=a.domEvents||{};a.datepickerOptions=a.datepickerOptions||{};a.useCache=typeof a.useCache==="undefined"?true:a.useCache;a.disableClick=typeof a.disableClick===
"undefined"?false:a.disableClick;var d={},e=function(h,i,l){var k=d[i+"-"+l]||[];h=c(h).find("tbody td");var j=h.find("a");if(a.disableClick){h.unbind("click").removeAttr("onclick");j.removeAttr("href").css("cursor","default")}c.each(k,function(n,o){var p=o.start.match(/-([0-9]+)-/)[1].stripLeft("0"),q=o.finish.match(/-([0-9]+)-/)[1].stripLeft("0"),r=o.start.match(/([0-9]+)\s/)[1].stripLeft("0"),s=o.finish.match(/([0-9]+)\s/)[1].stripLeft("0");r=p==l?j.filter(":contains("+r+"):first"):j.filter(":first");
s=q==l?j.filter(":contains("+s+"):first"):j.filter(":last");p=p==l?j.index(r):0;q=q==l?j.index(s):j.length-1;var v=[];v=p==q?r:p==q-1?r.add(s):r.add(j.filter(":lt("+q+")").filter(":gt("+p+")")).add(s);v.addClass(a.dayEntryClass).each(function(D,y){var t=c(y);t.text().trim();var m=t.data("dayEntriesIds");if(typeof m==="undefined")m=n;else{m=String(m).split(/,/g);m.push(n);m=m.join(",")}t.data("dayEntriesIds",m);c.each(a.domEvents,function(w,z){t.unbind(w).bind(w,function(A){var u=c(this),B=u.text().trim();
u=String(u.data("dayEntriesIds")).split(/,/g);var x=[];c.each(u,function(E,C){x.push(k[C])});z.apply(this,[A,B,x,k]);return true})})})});return true},f=function(h,i,l){var k=a.ajaxUrl,j=c.extend({},{year:h,month:i},a.ajaxData),n=l.dpDiv;a.useCache&&typeof d[h+"-"+i]!=="undefined"?setTimeout(function(){e(n,h,i)},50):c.ajax({url:k,method:"post",dataType:"json",data:j,success:function(o){d[h+"-"+i]=o[a.ajaxList]||[]||[];e(n,h,i)}});return true},g=c.extend({},a.datepickerOptions,{onChangeMonthYear:function(h,
i,l){return f(h,i,l)},beforeShow:function(h,i){setTimeout(function(){return f(i.drawYear,i.drawMonth+1,i)},1E3)}});b.datepicker(g);return b};c.BalClass=c.BalClass||function(a){this.construct(a)};c.extend(c.BalClass.prototype,{config:{"default":{}},construct:function(a){this.configure(a);return true},configure:function(a){this.config=this.config||{};this.config=c.extend({},this.config,a||{});return this},addConfig:function(a,b){if(typeof b==="undefined"){if(typeof a==="object")for(var d in a)this.applyConfig(d,
a[d]);return false}else typeof b==="object"&&this.applyConfig(a,b);return this},applyConfig:function(a,b){this.config[a]=this.config[a]||{};c.extend(true,this.config[a],b||{});return this},setConfig:function(a,b){this.config[a]=b||{};return this},getConfig:function(a){if(typeof a!=="string")return this.config;return this.getConfigWith(a)},getConfigWith:function(a,b){if(typeof a!=="string"){if(typeof b==="undefined")b=a;a="default"}if(typeof b!=="object")b={};var d={};c.extend(true,d,this.config[a]||
{},b||{});return d},getConfigWithDefault:function(a,b){return this.getConfigWith("default",this.getConfigWith(a,b))}});c.SparkleClass=function(a){this.construct(a)};c.extend(c.SparkleClass.prototype,c.BalClass.prototype,{addExtension:function(a,b){var d=c.Sparkle;if(a==="object")for(var e in a)d.addExtension(e,a[e]);else{e={config:{},extension:false};if(typeof b==="object"&&typeof b.config!=="undefined"){e.config=b.config;e.extension=b.extension}else e.extension=b;d.addConfig(a,e)}return true},cycleExtensions:function(){var a=
c(this),b=c.Sparkle,d=b.getExtensions();for(var e in d)b.triggerExtension.apply(a,[e]);return a},getExtensions:function(){c(this);return c.Sparkle.getConfig()},getExtension:function(a){c(this);return c.Sparkle.getConfigWithDefault(a)},getExtensionConfig:function(a){c(this);return c.Sparkle.getExtension(a).config||{}},configureExtension:function(a,b){c(this);c.Sparkle.applyConfig(a,{config:b});return this},triggerExtension:function(a){var b=c(this),d=c.Sparkle;a=d.getExtension(a);if(typeof a.extension!==
"undefined")return a.extension.apply(b,[d,a.config,a]);return false},fn:function(a){var b=c(this),d=c.Sparkle;a?d.triggerExtension.apply(b,[a]):d.cycleExtensions.apply(b,[]);return b},construct:function(a){var b=this;b.configure(a);c(function(){c.fn.sparkle=b.fn;c(document.body).sparkle()});return true}});c.Sparkle=new c.SparkleClass({date:{config:{selector:".sparkle-date",datepickerOptions:{dateFormat:"yy-mm-dd"}},extension:function(a,b){var d=c(this).findAndSelf(b.selector);return typeof d.datepicker===
"undefined"?d:d.datepicker(b.datepickerOptions)}},time:{config:{selector:".sparkle-time",timepickerOptions:{timeConvention:24}},extension:function(a,b){var d=c(this).findAndSelf(b.selector);return typeof d.timepicker==="undefined"?d:d.timepicker(b.timepickerOptions)}},datetime:{config:{selector:".sparkle-datetime"},extension:function(a,b){var d=c(this).findAndSelf(b.selector);return typeof d.datetimepicker==="undefined"?d:d.datetimepicker({datepickerOptions:a.getExtensionConfig("date").datepickerOptions,
timepickerOptions:a.getExtensionConfig("time").timepickerOptions})}},"hide-if-empty":{config:{selector:".sparkle-hide-if-empty:empty"},extension:function(a,b){return c(this).findAndSelf(b.selector).hide()}},hide:{config:{selector:".sparkle-hide"},extension:function(a,b){return c(this).findAndSelf(b.selector).removeClass(b.selector.replace(".","")).hide()}},show:{config:{selector:".sparkle-show"},extension:function(a,b){return c(this).findAndSelf(b.selector).removeClass(b.selector.replace(".","")).show()}},
subtle:{config:{selector:".sparkle-subtle",css:{"font-size":"80%"},inSpeed:200,inCss:{opacity:1},outSpeed:400,outCss:{opacity:0.5}},extension:function(a,b){return c(this).findAndSelf(b.selector).css(b.css).hover(function(){c(this).stop(true,false).animate(b.inCss,b.inSpeed)},function(){c(this).stop(true,false).animate(b.outCss,b.outSpeed)})}},panelshower:{config:{selectorSwitch:".sparkle-panelshower-switch",selectorPanel:".sparkle-panelshower-panel",inSpeed:200,outSpeed:200},extension:function(a,
b){var d=c(this),e=d.findAndSelf(b.selectorSwitch);d=d.findAndSelf(b.selectorPanel);e.once("click",{clickEvent:function(){var f=c(this),g=f.siblings(b.selectorPanel).filter(":first"),h=f.val();f.is(":checked,:selected")&&!(!h||h===0||h==="0"||h==="false"||h===false||h==="no"||h==="off")?g.fadeIn(b.inSpeed):g.fadeOut(b.outSpeed)}}.clickEvent);d.hide();return true}},autogrow:{config:{selector:"textarea.autogrow,textarea.autosize"},extension:function(a,b){var d=c(this).findAndSelf(b.selector);if(d.length){if(typeof c.fn.autogrow===
"undefined"){console.warn("Autogrow has failed to load.");return false}d.autogrow()}return true}},gsfnwidget:{config:{selector:".gsfnwidget"},extension:function(a,b){var d=c(this),e={clickEvent:function(f){if(typeof GSFN_feedback_widget==="undefined"){console.warn("GSFN has failed to load.");return true}GSFN_feedback_widget.show();f.preventDefault();return false}};c(function(){d.findAndSelf(b.selector).once("click",e.clickEvent)});return true}},hint:{config:{selector:".form-input-tip,.sparkle-hint,.sparkle-hint-has",
hasClass:"sparkle-hint-has",hintedClass:"sparkle-hint-hinted"},extension:function(a,b){var d=c(this),e=d.findAndSelf(b.selector).addClass(b.hasClass),f={focusEvent:function(){var g=c(this),h=g.attr("title"),i=g.val();h===i&&g.val("").removeClass(b.hintedClass);return true},blurEvent:function(){var g=c(this),h=g.attr("title"),i=g.val();if(h===i||!i)g.val("").addClass(b.hintedClass).val(h);return true},submitEvent:function(){e.trigger("focus")}};e.each(function(){c(this).once("focus",f.focusEvent).once("blur",
f.blurEvent).trigger("blur")});d.find("form").once("submit",f.submitEvent);return d}},debug:{config:{selector:".sparkle-debug",hasClass:"sparkle-debug-has",hintedClass:"sparkle-debug-hinted",showVar:"sparkle-debug-show"},extension:function(a,b){var d=c(this);a=c.Sparkle;var e={clickEvent:function(){var f=c(this),g=f.parent(),h=!g.data(b.showVar);g.data(b.showVar,h);f.siblings(".value").toggle(h)},dblclickEvent:function(){var f=c(this).parent(),g=f.data(b.showVar);f.data(b.showVar,g);f.find(".value").toggle(g)}};
d.findAndSelf(b.selector).addClass(b.hasClass).find(".value:has(.var)").hide().siblings(".name,.type").addClass("link").once("singleclick",e.clickEvent).once("dblclick",e.dblclickEvent);return d}},submit:{config:{selector:".sparkle-submit"},extension:function(a,b){var d=c(this);a=c.Sparkle;var e={clickEvent:function(){c(this).submitForm();return true}};d.findAndSelf(b.selector).once("singleclick",e.clickEvent);return d}},submitswap:{config:{selector:".sparkle-submitswap"},extension:function(a,b){var d=
c(this);a=c.Sparkle;var e={clickEvent:function(){var g=c(this);g.val(g.data("sparkle-submitswap-value"));return true}},f=d.findAndSelf(b.selector);f.once("singleclick",e.clickEvent);f.each(function(){var g=c(this);g.data("sparkle-submitswap-value",g.val());g.val(g.attr("title"));g.removeAttr("title")});return d}},"highlight-values":{config:{selector:".sparkle-highlight-values",innerSelector:"td",empty:["",false,null,"false","null",0,"-"],emptyClass:"sparkle-highlight-values-empty",notemptyClass:"sparkle-highlight-values-notempty"},
extension:function(a,b){var d=c(this);a=c.Sparkle;d.findAndSelf(b.selector).findAndSelf(b.innerSelector).each(function(){var e=c(this),f=e.text().trim();b.empty.has(f)?e.addClass(b.emptyClass):e.addClass(b.notemptyClass)});return d}}});c.Bespin=new c.BalClass({"default":{content:null,bespin:{settings:{tabstop:4}},toolbar:false},rich:{bespin:{syntax:"html"},toolbar:{fullscreen:true}},simple:{toolbar:false}});c.Bespin.fn=function(a,b){var d=c.Bespin,e=d.getConfigWithDefault(a,b),f=this;c(window).bind("onBespinLoad",
function(){d.useBespin(f,e)});window.onBespinLoad=function(){c(window).trigger("onBespinLoad")};return this};c.Bespin.useBespin=function(a,b){var d=c.Bespin,e=c(a),f,g;if(e.is("textarea")){g=e.attr("id")+"-bespin";f=c('<div id="'+g+'"/>').html(e.val()).css({height:e.css("height"),width:e.css("width")});f.insertAfter(e);e.hide()}else{f=e;g=f.attr("id")}bespin.useBespin(g,b.bespin).then(function(h){d.postBespin(g,h,b)},function(h){throw Error("Bespin Launch Failed: "+h);});return this};c.Bespin.postBespin=
function(a,b,d){a=c("#"+a);var e=a.siblings("textarea"),f=b.editor;a.css("overflow","hidden");a.wrap('<div class="bespin-wrap" />');var g=a.parent();e.length&&e.parents("form:first").submit(function(){e.val(f.value)});if(d.content||d.content==="")f.value=d.content;if(d.toolbar){$toolbar=c('<div class="bespin-toolbar" />');$toolbar.insertBefore(a);if(d.toolbar.fullscreen){$fullscreen=c('<span class="bespin-toolbar-fullscreen">Fullscreen</span>');$fullscreen.appendTo($toolbar);$fullscreen.click(function(){g.hasClass("bespin-fullscreen")?
c("body").add(g).removeClass("bespin-fullscreen"):c("body").add(g).addClass("bespin-fullscreen");b.dimensionsChanged()})}}return this};c.fn.Bespin=function(a,b){return c.Bespin.fn.apply(this,[a,b])};c.Tinymce=new c.BalClass({"default":{script_url:"/scripts/tiny_mce/tiny_mce.js",theme:"advanced",plugins:"autoresize,safari,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect,|,code,",theme_advanced_buttons2:"cut,copy,paste,pastetext,pasteword,|,undo,redo,|,link,unlink,image,|,preview,|,forecolor,backcolor,|,bullist,numlist,|,outdent,indent,blockquote,|,fullscreen",theme_advanced_buttons3:"tablecontrols,|,hr,removeformat,visualaid,|,sub,sup",theme_advanced_toolbar_location:"top",theme_advanced_toolbar_align:"left",
theme_advanced_statusbar_location:"bottom",theme_advanced_path:false,theme_advanced_resizing:false,width:"100%",template_replace_values:{}},rich:{},simple:{theme_advanced_buttons2:"",theme_advanced_buttons3:""}});c.fn.Tinymce=function(a,b){var d=c.Tinymce.getConfigWithDefault(a,b);return c(this).tinymce(d)};c.Help=new c.BalClass({"default":{wrap:'<span class="help-wrap"/>',icon:'<span class="help-icon"/>',text:'<span class="help-text"/>',parentClass:"",title:""}});c.fn.help=function(a){var b=c.Help;
if(typeof a==="string")a={title:a};a=b.getConfigWithDefault("default",a);b=c(this);var d=c(a.wrap),e=c(a.icon),f=c(a.text);b.parent().addClass(a.parentClass);var g=b.contents();b.append(d.append(f).append(e));g.appendTo(f);b.attr("title",a.title);return b}})(jQuery);
